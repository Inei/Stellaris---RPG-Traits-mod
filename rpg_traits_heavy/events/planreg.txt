namespace = planreg
####################################################
#	Vanilla planet preference assignment is extremely limited. Much like its trait assignment system, it just picks randomly from the list of available (planet) traits without any further limits or weighed chances. 
#	In addition, it picks form the total list of planets classes set as "starting_planet = yes" in 00_planet_classes. It will even pick planet_classes for which no habitability trait exists. In these cases it will make a new, fake/empty trait.
#	Being unweighed, this results in roughly half of the species living on stars if we allow stars as a starting planet.
#	So all in all this system is a bit inflexible at doing what it is doing (can't modify chances for certain species to spawn on Continental for example) and it doesn't allow for anything outside of its very limited scope.
#	
# 	All non-standard planet_classes have therefore been made "starting_planet = no" 
#	Instead races will get a random chance of being assigned a new type of RPGT habitability preference in addition to a suiting homeworld and appropriate tile blockers et
####################################################


event = {
	id = planreg.1		# trigger at start of game
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country  = {
			limit = {
				AND = {
					is_ai = yes
					NOT = {
						is_country_type = tiyanki
						is_country_type = neutral_faction
						is_country_type = faction
						is_country_type = pirate
						is_country_type = nomad
						is_country_type = amoeba
						is_country_type = crystal
						is_country_type = drone
						is_country_type = cloud
						is_country_type = fallen_empire
						is_country_type = enclave
						is_country_type = ambient
						is_country_type = rebel
						has_trait = trait_custom_race
						has_country_flag = planet_regulated			# prevent planets from switching multiple times
					}
				}
			}
			random_list = {
				56 = {
					# boring worlds
				}
				5 = {
					country_event = { id = planreg.101 }		# gaia (note: already civic for this as well!)
				}
				5 = {
					country_event = { id = planreg.102 }		# tomb (note: already civic for this as well!)
				}
				5 = {
					country_event = { id = planreg.103 }		# asteroid
				}
				5 = {
					country_event = { id = planreg.104 }		# toxic
				}
				5 = {
					country_event = { id = planreg.105 }		# barren
				}
				5 = {
					country_event = { id = planreg.106 }		# frozen
				}
				5 = {
					country_event = { id = planreg.107 }		# habitat
				}
				2 = {
					country_event = { id = planreg.108 }		# gas
				}
				2 = {
					country_event = { id = planreg.109 }		# molten
				}
				2 = {
					country_event = { id = planreg.110 }		# stellar
				}
			}
		}
	}
}

event = {
	id = planreg.2		# same but for machines; much higher chance of spawning on Barren, Tomb or AI worlds because they fought their makers over the respective planet
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country  = {
			limit = {
				AND = {
					is_ai = yes
					NOT = {
						is_country_type = tiyanki
						is_country_type = neutral_faction
						is_country_type = faction
						is_country_type = pirate
						is_country_type = nomad
						is_country_type = amoeba
						is_country_type = crystal
						is_country_type = drone
						is_country_type = cloud
						is_country_type = fallen_empire
						is_country_type = enclave
						is_country_type = ambient
						is_country_type = rebel
						has_trait = trait_custom_race
						has_country_flag = planet_regulated
					}
				 		has_trait = trait_mechanical
				}
			}
			random_list = {
				10 = {
					# boring worlds
				}
				15 = {
					country_event = { id = planreg.111 }		# machine
				}
				15 = {
					country_event = { id = planreg.105 }		# barren
				}
				15 = {
					country_event = { id = planreg.106 }		# frozen
				}
				15 = {
					country_event = { id = planreg.102 }		# tomb (note: already civic for this as well!)
				}
				2 = {
					country_event = { id = planreg.108 }		# gas
				}
				5 = {
					country_event = { id = planreg.103 }		# asteroid
				}
				5 = {
					country_event = { id = planreg.109 }		# molten
				}
				5 = {
					country_event = { id = planreg.104 }		# toxic
				}
				5 = {
					country_event = { id = planreg.107 }		# habitat
				}
				2 = {
					country_event = { id = planreg.110 }		# stellar
				}
				1 = {
					country_event = { id = planreg.101 }		# gaia (note: already civic for this as well!)
				}
			}
		}
	}
}

event = {
	id = planreg.3		# floaty looking portraits get a chance of being floaters
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country  = {
			limit = {
				AND = {
					is_ai = yes
					NOT = {
						is_country_type = tiyanki
						is_country_type = neutral_faction
						is_country_type = faction
						is_country_type = pirate
						is_country_type = nomad
						is_country_type = amoeba
						is_country_type = crystal
						is_country_type = drone
						is_country_type = cloud
						is_country_type = fallen_empire
						is_country_type = enclave
						is_country_type = ambient
						is_country_type = rebel
						has_trait = trait_custom_race
						has_country_flag = planet_regulated
					}
					OR = {						# only floaty looking portraits
						species_portrait = "mol7"       # balloons-like molluscoids
						species_portrait = "fun3"		# balloons-like fungoids
						species_portrait = "pla3"		# balloons-like plants
						species_portrait = "pla15"		# sort of balloon-ish?
					}
				}
			}
			random_list = {
				60 = {
					# boring worlds
				}
				40 = {
					country_event = { id = planreg.108 }		# gas
				}
			}
		}
	}
}

event = {
	id = planreg.4		# fire and rock looking things get higher chance of molten
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_country  = {
			limit = {
				AND = {
					is_ai = yes
					NOT = {
						is_country_type = tiyanki
						is_country_type = neutral_faction
						is_country_type = faction
						is_country_type = pirate
						is_country_type = nomad
						is_country_type = amoeba
						is_country_type = crystal
						is_country_type = drone
						is_country_type = cloud
						is_country_type = fallen_empire
						is_country_type = enclave
						is_country_type = ambient
						is_country_type = rebel
						has_trait = trait_custom_race
						has_country_flag = planet_regulated
					}
					OR = {						# only floaty looking portraits
						species_portrait = "art8"
						species_portrait = "fun12"
						species_portrait = "rep14"
						species_portrait = "rep15"
						species_portrait = "rep17"
						species_portrait = "rep8"
						species_portrait = "pla7"
					}
				}
			}
			random_list = {
				60 = {
					# boring worlds
				}
				40 = {
					country_event = { id = planreg.109 }		# molten
				}
			}
		}
	}
}

country_event = {
	id = planreg.101			#	gaia
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_gaia_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_gaia			# splendid
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.102			#	tomb
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_nuked_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_tomb			# KABOOM
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.103			#	asteroid
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_asteroid_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_asteroid
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.104			#	toxic
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_toxic_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_toxic
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.105			#	barren
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_barren_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_barren
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.106			#	frozen
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_frozen_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_frozen
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.107			#	habitat
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_habitat_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_habitat
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.108			#	gas
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_gas_giant_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_gas_giant
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.109			#	molten
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_molten_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_molten
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.110			#	stellar
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {	
				species = this
				add_trait = trait_pc_a_star_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_a_star
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}

country_event = {
	id = planreg.111			#	machine
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_owned_pop = {
				if = { limit = { has_trait = trait_pc_desert_preference } modify_species = { species = this remove_trait = trait_pc_desert_preference } }
				if = { limit = { has_trait = trait_pc_arid_preference } modify_species = { species = this remove_trait = trait_pc_arid_preference } }
				if = { limit = { has_trait = trait_pc_savannah_preference } modify_species = { species = this remove_trait = trait_pc_savannah_preference } }
				if = { limit = { has_trait = trait_pc_tropical_preference } modify_species = { species = this remove_trait = trait_pc_tropical_preference } }
				if = { limit = { has_trait = trait_pc_continental_preference } modify_species = { species = this remove_trait = trait_pc_continental_preference } }
				if = { limit = { has_trait = trait_pc_ocean_preference } modify_species = { species = this remove_trait = trait_pc_ocean_preference } }
				if = { limit = { has_trait = trait_pc_arctic_preference } modify_species = { species = this remove_trait = trait_pc_arctic_preference } }
				if = { limit = { has_trait = trait_pc_tundra_preference } modify_species = { species = this remove_trait = trait_pc_tundra_preference } }
				if = { limit = { has_trait = trait_pc_alpine_preference } modify_species = { species = this remove_trait = trait_pc_alpine_preference } }
				if = { limit = { has_trait = trait_pc_ai_preference } modify_species = { species = this remove_trait = trait_pc_ai_preference } }
				if = { limit = { has_trait = trait_pc_nuked_preference } modify_species = { species = this remove_trait = trait_pc_nuked_preference } }
				if = { limit = { has_trait = trait_pc_gaia_preference } modify_species = { species = this remove_trait = trait_pc_gaia_preference } }
				if = { limit = { has_trait = trait_pc_ringworld_habitable_preference } modify_species = { species = this remove_trait = trait_pc_ringworld_habitable_preference } }
				if = { limit = { has_trait = trait_pc_habitat_preference } modify_species = { species = this remove_trait = trait_pc_habitat_preference } }
				if = { limit = { has_trait = trait_pc_a_star_preference } modify_species = { species = this remove_trait = trait_pc_a_star_preference } }
				if = { limit = { has_trait = trait_pc_gas_giant_preference } modify_species = { species = this remove_trait = trait_pc_gas_giant_preference } }
				if = { limit = { has_trait = trait_pc_molten_preference } modify_species = { species = this remove_trait = trait_pc_molten_preference } }
				if = { limit = { has_trait = trait_pc_toxic_preference } modify_species = { species = this remove_trait = trait_pc_toxic_preference } }
				if = { limit = { has_trait = trait_pc_barren_preference } modify_species = { species = this remove_trait = trait_pc_barren_preference } }
				if = { limit = { has_trait = trait_pc_frozen_preference } modify_species = { species = this remove_trait = trait_pc_frozen_preference } }
				if = { limit = { has_trait = trait_pc_asteroid_preference } modify_species = { species = this remove_trait = trait_pc_asteroid_preference } }
			modify_species = {
				species = this
				add_trait = trait_pc_ai_preference
			}
		}
		every_owned_planet = {
			change_pc = pc_ai
			reroll_deposits = yes
			# could change tileblockers here, but I won't for now. You only really notice upon close inspection after annexing anyway
		}
		set_country_flag = planet_regulated
	}
}
